import os
import platform
import time
import subprocess

def get_uptime_linux():
    # On Linux, use the 'uptime' command
    try:
        with open('/proc/uptime', 'r') as f:
            uptime_seconds = float(f.readline().split()[0])
        return uptime_seconds
    except Exception as e:
        print(f"Error getting uptime on Linux: {e}")
        return None

def get_uptime_windows():
    # On Windows, use 'net stats workstation' command to get uptime
    try:
        proc = subprocess.Popen('net stats workstation', shell=True, stdout=subprocess.PIPE)
        output = proc.communicate()[0].decode()
        for line in output.splitlines():
            if "Statistics since" in line:
                # Parse the line that contains the date and time
                start_time_str = line.split("since")[1].strip()
                start_time = time.strptime(start_time_str, "%m/%d/%Y %I:%M:%S %p")
                start_time_epoch = time.mktime(start_time)
                return time.time() - start_time_epoch
    except Exception as e:
        print(f"Error getting uptime on Windows: {e}")
        return None

def format_runtime(seconds):
    days = seconds // (24 * 3600)
    seconds %= (24 * 3600)
    hours = seconds // 3600
    seconds %= 3600
    minutes = seconds // 60
    return f"{int(days)} days, {int(hours)} hours, {int(minutes)} minutes"

def get_os_uptime():
    os_type = platform.system()
    if os_type == "Linux":
        uptime_seconds = get_uptime_linux()
    elif os_type == "Windows":
        uptime_seconds = get_uptime_windows()
    else:
        print("Unsupported OS")
        return None
    
    if uptime_seconds is not None:
        return format_runtime(uptime_seconds)
    return None

if __name__ == "__main__":
    uptime = get_os_uptime()
    if uptime:
        print(f"System has been online for: {uptime}")
